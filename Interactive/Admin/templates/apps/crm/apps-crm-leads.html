{% extends "partials/base.html" %} {% load static %} {% block title %}Leads
{%endblock title %} {% block extra_css %}
<!-- Sweet Alert css-->
<link
  href="{% static 'libs/sweetalert2/dist/sweetalert2.min.css' %}"
  rel="stylesheet"
  type="text/css"
/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
{% endblock extra_css %} {% block content %}
<!-- ============================================================== -->
<!-- Start right Content here -->
<!-- ============================================================== -->
<div class="main-content">
  <div class="page-content">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg-12">
          <div class="card" id="leadsList">
            <div class="card-header border-0">
              <div class="row g-4 align-items-center">
                <div class="col-sm-3">
                  <div class="search-box"></div>
                </div>
                <div class="col-sm-auto ms-auto">
                  <div class="hstack gap-2"></div>
                </div>
              </div>
            </div>
            <div class="card-body">
              <div>
                <div class="table-responsive table-card">
                  <table class="table align-middle" id="customerTable">
                    <thead class="table-light">
                      <tr>
                        <th class="sort" data-sort="name">Customer Name</th>
                        <th class="sort" data-sort="company_name">Group Id</th>
                        <th class="sort" data-sort="leads_score">Group Name</th>
                        <th class="sort" data-sort="phone">Name</th>
                        <th class="sort" data-sort="location">Profile Url</th>
                        <th class="sort" data-sort="action">Action</th>
                      </tr>
                    </thead>
                    <tbody class="list form-check-all">
                      {% for search in get_customers %}
                      <tr>
                        <td class="">{{search.customer_name}}</td>
                        <td class="">{{search.group_id}}</td>
                        <td class="">{{search.group_name}}</td>
                        <td class="">{{search.name}}</td>
                        <td class="">
                          <a href="{{search.profile_url}}"
                            >{{search.profile_url}}</a
                          >
                        </td>
                        <td>
                          <ul class="list-inline hstack gap-2 mb-0">
                            <li
                              class="list-inline-item edit"
                              data-bs-toggle="tooltip"
                              data-bs-trigger="hover"
                              data-bs-placement="top"
                              title="Message"
                            >
                              <a
                                href="{% url 'apps:detail_customer' search.id %}"
                                class="text-muted d-inline-block"
                              >
                                <i class="ri-question-answer-line fs-16" style="color:#2ED0DA" ></i>
                              </a>
                            </li>
                            <li
                              class="list-inline-item"
                              data-bs-toggle="tooltip"
                              data-bs-trigger="hover"
                              data-bs-placement="top"
                              title="Delete"
                            >
                              {% comment %}
                              <a
                                class="remove-item-btn"
                                href="{% url 'apps:delete_customer' search.id %}"
                              >
                                <i
                                  class="ri-delete-bin-fill align-bottom text-muted"
                                ></i>
                              </a>
                              {% endcomment %}
                              <a
                                class="remove-item-btn"
                                onClick="xoa_khach({{search.id}})"
                              >
                                <i
                                  class="ri-delete-bin-fill align-bottom " style="color:red"
                                ></i>
                              </a>
                            </li>
                          </ul>
                        </td>
                      </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                  <div class="noresult" style="display: none">
                    <div class="text-center">
                      <lord-icon
                        src="https://cdn.lordicon.com/msoeawqm.json"
                        trigger="loop"
                        colors="primary:#121331,secondary:#08a88a"
                        style="width: 75px; height: 75px"
                      >
                      </lord-icon>
                      <h5 class="mt-2">Sorry! No Result Found</h5>
                      <p class="text-muted mb-0">
                        We've searched more than 150+ leads We did not find any
                        leads for you search.
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Modal -->
              <div
                class="modal fade zoomIn"
                id="deleteRecordModal"
                tabindex="-1"
                aria-labelledby="deleteRecordLabel"
                aria-hidden="true"
              >
                <div
                  class="modal-dialog modal-dialog-centered"
                  id="deleteRecordModalCC"
                >
                  <div class="modal-content">
                    <div class="modal-header">
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                        id="btn-close"
                        onClick="Close()"
                      ></button>
                    </div>
                    <div class="modal-body p-5 text-center">
                      <lord-icon
                        src="https://cdn.lordicon.com/gsqxdxog.json"
                        trigger="loop"
                        colors="primary:#405189,secondary:#f06548"
                        style="width: 90px; height: 90px"
                      ></lord-icon>
                      <div class="mt-4 text-center">
                        <h4 class="fs-semibold">
                          You are about to delete a lead ?
                        </h4>
                        <p class="text-muted fs-14 mb-4 pt-1">
                          Deleting your lead will remove all of your information
                          from our database.
                        </p>
                        <div class="hstack gap-2 justify-content-center remove">
                          <button
                            class="btn btn-link link-info fw-semibold text-decoration-none"
                            data-bs-dismiss="modal"
                            onClick="Close()"
                          >
                            <i class="ri-close-line me-1 align-middle"></i>
                            Close
                          </button>
                          <button
                            class="btn btn-primary"
                            id="delete-record"
                            onClick="DYXoa()"
                          >
                            Yes, Delete It!!
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!--end modal -->
            </div>
          </div>
        </div>
        <!--end col-->
      </div>
      <!--end row-->
    </div>
    <!-- container-fluid -->
  </div>
  <!-- End Page-content -->

  {% block footer %} {% include "partials/footer.html" %} {% endblock footer %}
</div>
<!-- end main content-->
{% endblock content %} {% block extra_js %}

<script>
  var id_NgXoa = -1;
  function xoa_khach(id) {
    document.getElementById("deleteRecordModal").style.display = "inherit";
    document.getElementById("deleteRecordModal").style.opacity = 1;
    document.getElementById("deleteRecordModalCC").style.opacity = 1;
    id_NgXoa = id;
  }


  function Close() {
    document.getElementById("deleteRecordModal").style.display = "none";
    document.getElementById("deleteRecordModal").style.opacity = 0;
    document.getElementById("deleteRecordModalCC").style.opacity = 0;
    id_NgXoa = -1;
  }

  function DYXoa() {
    var data = {
      customer_id: id_NgXoa,
    };
    $.ajax({
      url: "/source-clients/delete_customer",
      type: "get",
      data: data,
      success: function (data) {
        location.reload();
      },
      error: function (xhr, status, error) {
        console.log(error);
      },
    });
  }
</script>

<script src="{% static 'libs/bootstrap/js/bootstrap.bundle.min.js'%}"></script>
<script src="{% static 'libs/simplebar/simplebar.min.js'%}"></script>
<script src="{% static 'libs/node-waves/waves.min.js'%}"></script>
<script src="{% static 'libs/feather-icons/feather.min.js'%}"></script>
<script src="{% static 'js/pages/plugins/lord-icon-2.1.0.js'%}"></script>
<script src="{% static 'js/plugins.js'%}"></script>

<!-- list.js min js -->
<script src="{% static 'libs/list.js/list.min.js'%}"></script>
<script src="{% static 'libs/list.pagination.js/list.pagination.min.js'%}"></script>
<script src="{% static 'js/pages/crm-leads.init.js'%}"></script>

<!-- Sweet Alerts js -->
<script src="{% static 'libs/sweetalert2/sweetalert2.min.js'%}"></script>

<!-- App js -->
<script src="{% static 'js/app.js'%}"></script>

<!-- list.js min js -->
<script src="{% static 'libs/list.js/dist/list.min.js'%}"></script>
<script src="{% static 'libs/list.pagination.js/dist/list.pagination.min.js'%}"></script>

<script src="{% static 'js/pages/crm-leads.init.js' %}"></script>
<!-- Sweet Alerts js -->
<script src="{% static 'libs/sweetalert2/dist/sweetalert2.min.js' %}"></script>
{% endblock extra_js %}
